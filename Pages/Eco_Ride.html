<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco-Ride Planner | EcoConnect</title>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2A7B9B',
                        secondary: '#4CAF50',
                        accent: '#FFC107',
                        dark: '#2C3E50',
                        light: '#F0F4F8',
                    },
                    animation: {
                        'slide-down': 'slideDown 0.3s ease-out forwards',
                    },
                    keyframes: {
                        slideDown: {
                            '0%': { opacity: 0, transform: 'translateY(-20px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .navbar-gradient {
                background: linear-gradient(90deg, rgba(42, 123, 155, 1) 0%, rgba(62, 157, 145, 1) 22%, rgba(72, 173, 140, 1) 33%, rgba(87, 199, 133, 1) 50%, rgba(237, 221, 83, 1) 100%);
            }
            .hero-gradient {
                background: linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
            }
            .features-gradient {
                background: linear-gradient(to right, #FFFFFF, #6DD5FA, #2980B9);
            }
            .footer-gradient {
                background: linear-gradient(to right, #4CA1AF, #2C3E50);
            }
            .nav-link-hover:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }
            .feature-card-hover:hover {
                background-color: #006666;
            }
            .carbon-footprint {
                @apply text-green-700 font-bold;
            }
            .suggestion-list li::before {
                content: 'â€¢';
                @apply text-green-600 font-bold mr-2;
            }
            .travel-option-card {
                @apply bg-white rounded-xl shadow-md p-6 flex flex-col space-y-3;
            }
            .loading-spinner {
                @apply w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin;
            }
            /* Custom styles from Eco-Ride.html */
            .container {
                max-width: 900px;
                margin: 2rem auto;
                padding: 4.5rem;
                background-color: #ffffff;
                border-radius: 1rem;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            }
            .input-group label {
                font-weight: 600;
                color: #475569;
            }
            .input-group input[type="text"],
            .input-group input[type="date"] {
                border: 1px solid #cbd5e1;
                padding: 0.75rem 1rem;
                border-radius: 0.5rem;
                width: 100%;
                transition: border-color 0.2s;
            }
            .input-group input[type="text"]:focus,
            .input-group input[type="date"]:focus {
                outline: none;
                border-color: #60a5fa;
                box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
            }
            .btn-primary {
                background-color: #22c55e;
                color: white;
                padding: 0.85rem 1.5rem;
                border-radius: 0.75rem;
                font-weight: 700;
                transition: background-color 0.2s, transform 0.1s;
                box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);
            }
            .btn-primary:hover {
                background-color: #16a34a;
                transform: translateY(-1px);
            }
            .card {
                background-color: #f8fafc;
                border: 1px solid #e2e8f0;
                border-radius: 0.75rem;
                padding: 1.25rem;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            }
            .carbon-footprint {
                font-size: 1.25rem;
                font-weight: 700;
                color: #059669;
            }
            .suggestion-list li {
                margin-bottom: 0.5rem;
                color: #475569;
            }
            .suggestion-list li::before {
                content: 'â€¢';
                color: #22c55e;
                font-weight: bold;
                display: inline-block;
                width: 1em;
                margin-left: -1em;
            }
        }
    </style>
</head>
<body class="antialiased bg-gray-50">
    <!-- Header/Navigation -->
    <header>
        <div class="navbar-gradient fixed top-0 w-full h-20 flex justify-center items-center px-5 py-5 text-white z-50">
            <div class="flex justify-between items-center w-full max-w-7xl">
                <!-- Logo -->
                <a href="/">
                <div class="flex items-center">
                    <i class="fa-solid fa-leaf text-3xl md:text-4xl"></i>
                    <span class="ml-2 text-2xl md:text-3xl font-bold">EcoConnect</span>
                </div>
                </a>

                <!-- Hamburger menu button -->
                <div class="hamburger flex flex-col cursor-pointer w-8 h-8 justify-center items-center ml-2 md:hidden" id="hamburger-menu" aria-label="Open navigation" tabindex="0">
                    <span class="h-1 w-7 bg-white my-0.5 rounded"></span>
                    <span class="h-1 w-7 bg-white my-0.5 rounded"></span>
                    <span class="h-1 w-7 bg-white my-0.5 rounded"></span>
                </div>

                <!-- Navigation Links -->
                <div class="first-box hidden md:flex justify-evenly items-center flex-1 mx-4">
                     <div class="nav-link-hover p-3 rounded">
                        <a href="/community" class="flex items-center text-white no-underline">
                            <i class="fa-solid fa-people-group text-xl md:text-2xl"></i>
                            <span class="ml-2 text-base md:text-xl">Community Forum</span>
                        </a>
                    </div>
                    
                    <div class="nav-link-hover p-3 rounded">
                        <a href="/eco-ride" class="flex items-center text-white no-underline">
                            <i class="fa-solid fa-car-side text-xl md:text-2xl"></i>
                            <span class="ml-2 text-base md:text-xl">Eco-Ride</span>
                        </a>
                    </div>
                    
                    <div class="nav-link-hover p-3 rounded">
                        <a href="/shop" class="flex items-center text-white no-underline">
                            <i class="fa-solid fa-cart-shopping text-xl md:text-2xl"></i>
                            <span class="ml-2 text-base md:text-xl">Shopping Assistant</span>
                        </a>
                    </div>
                    
                    <div class="nav-link-hover p-3 rounded">
                        <a href="/education" class="flex items-center text-white no-underline">
                            <i class="fa-solid fa-book text-xl md:text-2xl"></i>
                            <span class="ml-2 text-base md:text-xl">Education</span>
                        </a>
                    </div>
                </div>

                <!-- Profile Link -->
                <div class="nav-link-hover p-3 rounded">
                    <a href="/login" class="flex items-center text-white no-underline">
                        <i class="fa-solid fa-user text-xl md:text-2xl"></i>
                        <span class="ml-2 text-base md:text-xl">Profile</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div class="first-box-mobile hidden absolute top-20 left-0 w-full bg-white shadow-lg z-40 md:hidden">
            <div class="flex flex-col py-2">
                <a href="/" class="flex items-center p-4 text-gray-800 hover:bg-gray-100">
                    <i class="fa-solid fa-house text-xl mr-3"></i>
                    <span class="text-lg">Home</span>
                </a>
                <a href="/community" class="flex items-center p-4 text-gray-800 hover:bg-gray-100">
                    <i class="fa-solid fa-people-group text-xl mr-3"></i>
                    <span class="text-lg">Community Forum</span>
                </a>
                <a href="/eco-ride" class="flex items-center p-4 text-gray-800 hover:bg-gray-100">
                    <i class="fa-solid fa-car-side text-xl mr-3"></i>
                    <span class="text-lg">Eco-Ride</span>
                </a>
                <a href="/shop" class="flex items-center p-4 text-gray-800 hover:bg-gray-100">
                    <i class="fa-solid fa-cart-shopping text-xl mr-3"></i>
                    <span class="text-lg">Shopping Assistant</span>
                </a>
                <a href="/education" class="flex items-center p-4 text-gray-800 hover:bg-gray-100">
                    <i class="fa-solid fa-book text-xl mr-3"></i>
                    <span class="text-lg">Education</span>
                </a>
                <a href="/login" class="flex items-center p-4 text-gray-800 hover:bg-gray-100">
                    <i class="fa-solid fa-user text-xl mr-3"></i>
                    <span class="text-lg">Profile</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content - Replaced with Eco-Ride content -->
    <div class="container pt-24">
        <h1 class="text-4xl font-extrabold text-center mb-6 text-gray-800">
            Eco Commute Planner
        </h1>
        <p class="text-center text-lg mb-8 text-gray-600">
            Plan your journey, minimize your carbon footprint.
        </p>

        <!-- Journey Input Form -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="input-group">
                <label for="origin" class="block text-sm mb-2">Departure Location:</label>
                <input type="text" id="origin" placeholder="e.g., New York City" class="focus:border-blue-500">
            </div>
            <div class="input-group">
                <label for="destination" class="block text-sm mb-2">Arrival Location:</label>
                <input type="text" id="destination" placeholder="e.g., Los Angeles" class="focus:border-blue-500">
            </div>
        </div>

        <div class="text-center mb-10">
            <button id="calculateBtn" class="btn-primary">
                Calculate My Eco-Route
            </button>
        </div>

        <!-- Results Section -->
        <div id="results" class="hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Your Eco-Friendly Options</h2>

            <!-- Message Box for alerts -->
            <div id="messageBox" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4" role="alert">
                <strong class="font-bold">Error!</strong>
                <span class="block sm:inline" id="messageText"></span>
            </div>

            <div id="optionsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- Travel option cards will be inserted here by JavaScript -->
            </div>

            <!-- General Greener Travel Tips -->
            <div class="bg-blue-50 p-6 rounded-xl shadow-md mb-10">
                <h3 class="text-2xl font-bold text-blue-800 mb-4">Go Even Greener!</h3>
                <p class="text-blue-700 mb-4">
                    Every journey is an opportunity to reduce your environmental impact. Here are some general tips:
                </p>
                <ul class="list-disc pl-5 text-blue-700 space-y-2">
                    <li>For short distances, consider walking or cycling. It's healthy, free, and produces zero emissions!</li>
                    <li>If driving, carpool with others to share the carbon burden.</li>
                    <li>Opt for public transport (buses, trains) whenever possible, especially for intercity travel.</li>
                    <li>When flying, choose direct flights and fly economy class to reduce your footprint.</li>
                    <li>Consider offsetting your unavoidable emissions through certified carbon offset programs.</li>
                    <li>Travel light! Less luggage means less fuel consumed.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-gradient text-white py-8 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="footer-content flex flex-col md:flex-row justify-between items-center">
                <div class="footer-section p-4 ">
                    <div class="flex items-center">
                    <i class="fa-solid fa-leaf text-3xl md:text-4xl"></i>
                    <span class="ml-2 text-2xl md:text-3xl font-bold">EcoConnect</span>
                </div> 
                </div>

                <div class="footer-section social flex mt-6 md:mt-0">
                    <div class="follow p-5 rounded-full mx-2">
                        <i class="fa-brands fa-instagram text-3xl md:text-4xl"></i>
                    </div>
                    <div class="follow p-5 rounded-full mx-2">
                        <i class="fa-brands fa-twitter text-3xl md:text-4xl"></i>
                    </div>
                    <div class="follow p-5 rounded-full mx-2">
                        <i class="fa-brands fa-facebook text-3xl md:text-4xl"></i>
                    </div>
                </div>
            </div>

            <div class="footer-bottom text-center mt-8 pt-6 border-t border-white border-opacity-30">
                <p>Â© 2025 All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Get references to DOM elements for travel planning
        const calculateBtn = document.getElementById('calculateBtn');
        const originInput = document.getElementById('origin');
        const destinationInput = document.getElementById('destination');
        const resultsSection = document.getElementById('results');
        const optionsContainer = document.getElementById('optionsContainer');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');

        // Get references to DOM elements for stays
        const searchStaysBtn = document.getElementById('searchStaysBtn');
        const stayLocationInput = document.getElementById('stayLocation');
        const checkInDateInput = document.getElementById('checkInDate');
        const checkOutDateInput = document.getElementById('checkOutDate');
        const staysResultsContainer = document.getElementById('staysResults');

        // Function to display a message in the message box
        function showMessage(message, type = 'error') {
            messageText.textContent = message;
            messageBox.classList.remove('hidden');
            if (type === 'error') {
                messageBox.classList.remove('bg-green-100', 'border-green-400', 'text-green-700');
                messageBox.classList.add('bg-red-100', 'border-red-400', 'text-red-700');
            } else {
                messageBox.classList.remove('bg-red-100', 'border-red-400', 'text-green-700');
                messageBox.classList.add('bg-green-100', 'border-green-400', 'text-green-700');
            }
        }

        // Function to hide the message box
        function hideMessageBox() {
            messageBox.classList.add('hidden');
        }

        // Simulate carbon footprint calculation based on mode and distance
        // In a real application, this would involve complex APIs and data.
        function calculateCarbonFootprint(mode, distanceKm) {
            let carbonPerKm; // kg CO2e per km per passenger
            switch (mode) {
                case 'airplane':
                    carbonPerKm = 0.15; // High for air travel
                    break;
                case 'car':
                    carbonPerKm = 0.08; // Assumes average car, 1 passenger
                    break;
                case 'train':
                    carbonPerKm = 0.03; // Generally lower for trains
                    break;
                case 'bus':
                    carbonPerKm = 0.05; // Lower than car, higher than train
                    break;
                case 'boat':
                    carbonPerKm = 0.10; // Varies greatly, using a moderate value
                    break;
                case 'walk':
                case 'bicycle':
                    carbonPerKm = 0; // Zero direct emissions
                    break;
                default:
                    carbonPerKm = 0.07; // Default average
            }
            // Add some randomness for more realistic feel
            const variability = (Math.random() * 0.2 - 0.1); // +/- 10%
            return (carbonPerKm * distanceKm * (1 + variability)).toFixed(2);
        }

        // Simulate distance calculation (very basic, just for demonstration)
        // In a real application, this would be replaced by an API call.
        function simulateDistance(origin, destination) {
            const knownRoutes = {
                'new york city to los angeles': 4500, // km
                'london to paris': 450, // km
                'mumbai to delhi': 1400, // km
                'delhi to agra': 200, // km
                'san francisco to seattle': 1300, // km
                'sydney to melbourne': 900, // km
                'tokyo to osaka': 500, // km
                'berlin to munich': 580, // km
                'chennai to bangalore': 350, // km
                'hyderabad to bangalore': 570, // km
                'kolkata to chennai': 1670, // km
                'pune to mumbai': 150, // km
                'goa to bangalore': 550, // km
                'jaipur to delhi': 270, // km
                'ahmedabad to mumbai': 530, // km
                'lucknow to delhi': 500, // km
                'patna to kolkata': 550, // km
                'bhopal to indore': 200, // km
                'kochi to bangalore': 550, // km
                'thiruvananthapuram to kochi': 200, // km
                'chandigarh to delhi': 250, // km
                'amritsar to delhi': 450, // km
                'dehradun to delhi': 250, // km
                'shimla to delhi': 350, // km
                'manali to delhi': 550, // km
                'rishikesh to delhi': 250, // km
                'haridwar to delhi': 200, // km
                'varanasi to delhi': 800, // km
                'agra to lucknow': 330, // km
                'kanpur to lucknow': 80, // km
                'allahabad to lucknow': 200, // km
                'gwalior to bhopal': 420, // km
                'udaipur to jaipur': 400, // km
                'jodhpur to jaipur': 350, // km
                'jaisalmer to jodhpur': 280, // km
                'surat to ahmedabad': 260, // km
                'vadodara to ahmedabad': 100, // km
                'rajkot to ahmedabad': 220, // km
                'nagpur to pune': 700, // km
                'nashik to pune': 200, // km
                'aurangabad to pune': 230, // km
                'shirdi to pune': 180, // km
                'vijayawada to hyderabad': 270, // km
                'visakhapatnam to hyderabad': 600, // km
                'tirupati to chennai': 150, // km
                'madurai to chennai': 450, // km
                'coimbatore to chennai': 500, // km
                'puducherry to chennai': 150, // km
                'mysore to bangalore': 150, // km
                'mangalore to bangalore': 350, // km
                'hubli to bangalore': 400, // km
                'bhubaneswar to kolkata': 450, // km
                'ranchi to kolkata': 400, // km
                'guwahati to kolkata': 1000, // km
                'shillong to guwahati': 100, // km
                'gangtok to siliguri': 120, // km
                'port blair to chennai': 1300, // km (boat/flight)
                'leh to srinagar': 400, // km
                'srinagar to jammu': 300, // km
                'agra to delhi': 200, // km
                'delhi to jaipur': 270, // km
                'delhi to chandigarh': 250, // km
                'delhi to dehradun': 250, // km
                'delhi to lucknow': 500, // km
                'delhi to amritsar': 450, // km
                'delhi to shimla': 350, // km
                'delhi to manali': 550, // km
                'delhi to rishikesh': 250, // km
                'haridwar to delhi': 200, // km
                'delhi to varanasi': 800, // km
                'delhi to mumbai': 1400, // km
                'delhi to kolkata': 1500, // km
                'delhi to bangalore': 2100, // km
                'delhi to chennai': 2200, // km
                'delhi to hyderabad': 1500, // km
                'delhi to ahmedabad': 900, // km
                'delhi to pune': 1400, // km
                'delhi to goa': 1800, // km
                'delhi to udaipur': 650, // km
                'delhi to jodhpur': 600, // km
                'delhi to jaisalmer': 800, // km
                'delhi to surat': 1200, // km
                'delhi to vadodara': 950, // km
                'delhi to rajkot': 1100, // km
                'delhi to nagpur': 1000, // km
                'delhi to nashik': 1200, // km
                'delhi to aurangabad': 1100, // km
                'delhi to shirdi': 1100, // km
                'delhi to vijayawada': 1600, // km
                'delhi to visakhapatnam': 1700, // km
                'delhi to tirupati': 2000, // km
                'delhi to madurai': 2500, // km
                'delhi to coimbatore': 2400, // km
                'delhi to puducherry': 2300, // km
                'delhi to mysore': 2200, // km
                'delhi to mangalore': 2300, // km
                'delhi to hubli': 1800, // km
                'delhi to bhubaneswar': 1500, // km
                'delhi to ranchi': 1200, // km
                'delhi to guwahati': 1900, // km
                'delhi to shillong': 2000, // km
                'delhi to gangtok': 1600, // km
                'delhi to port blair': 2500, // km
                'delhi to leh': 1000, // km
                'delhi to srinagar': 800, // km
                'delhi to jammu': 600, // km
                'bangalore to chennai': 350, // km
                'bangalore to hyderabad': 570, // km
                'bangalore to mumbai': 980, // km
                'bangalore to pune': 850, // km
                'bangalore to goa': 550, // km
                'bangalore to kochi': 550, // km
                'bangalore to thiruvananthapuram': 750, // km
                'bangalore to mysore': 150, // km
                'bangalore to mangalore': 350, // km
                'bangalore to hubli': 400, // km
                'mumbai to pune': 150, // km
                'mumbai to ahmedabad': 530, // km
                'mumbai to goa': 580, // km
                'mumbai to hyderabad': 710, // km
                'mumbai to nagpur': 700, // km
                'mumbai to nashik': 200, // km
                'mumbai to aurangabad': 230, // km
                'mumbai to shirdi': 180, // km
                'kolkata to chennai': 1670, // km
                'kolkata to hyderabad': 1400, // km
                'kolkata to mumbai': 1900, // km
                'kolkata to bangalore': 1870, // km
                'kolkata to bhubaneswar': 450, // km
                'kolkata to ranchi': 400, // km
                'kolkata to guwahati': 1000, // km
                'kolkata to shillong': 1100, // km
                'kolkata to gangtok': 700, // km
            };

            const key1 = `${origin.toLowerCase()} to ${destination.toLowerCase()}`;
            const key2 = `${destination.toLowerCase()} to ${origin.toLowerCase()}`; // Check reverse too

            if (knownRoutes[key1]) {
                return knownRoutes[key1];
            } else if (knownRoutes[key2]) {
                return knownRoutes[key2];
            }
            // Fallback for unknown routes: a random distance between 100 and 2000 km
            return Math.floor(Math.random() * 1900) + 100;
        }

        // Main function to handle travel calculation and display
        calculateBtn.addEventListener('click', async () => { // Added 'async' here
            hideMessageBox(); // Hide any previous messages

            const origin = originInput.value.trim();
            const destination = destinationInput.value.trim();

            if (!origin || !destination) {
                showMessage('Please enter both departure and arrival locations for your journey.');
                return;
            }

            // In a real API scenario, you'd await the distance from the API
            // const distanceKm = await simulateDistance(origin, destination);
            const distanceKm = simulateDistance(origin, destination); // Using simulated for now

            // Define travel options with their specific advice
            const travelOptions = [
                {
                    mode: 'Bus',
                    icon: 'ðŸšŒ',
                    carbon: calculateCarbonFootprint('bus', distanceKm),
                    reduceTips: [
                        'Choose local public transport over private buses for shorter distances.',
                        'Look for bus operators using newer, more fuel-efficient fleets.',
                        'Consider overnight buses for longer journeys to save on accommodation and travel time.'
                    ],
                    ticketSuggestions: [
                        'Check for multi-day or weekly passes if you plan multiple trips.',
                        'Book in advance for potentially cheaper and greener options.',
                        'Look for direct routes to avoid unnecessary transfers.'
                    ]
                },
                {
                    mode: 'Train',
                    icon: 'ðŸš†',
                    carbon: calculateCarbonFootprint('train', distanceKm),
                    reduceTips: [
                        'Trains are generally one of the greenest motorized options, especially electric trains.',
                        'Opt for direct routes to minimize energy consumption from stops and starts.',
                        'Choose standard class over first class if available, as it typically means more passengers per carriage.'
                    ],
                    ticketSuggestions: [
                        'Explore rail passes for extensive travel within a region or country.',
                        'Book off-peak tickets for better prices and potentially less crowded, more efficient journeys.',
                        'Consider sleeper trains for long distances to combine travel and accommodation.'
                    ]
                },
                {
                    mode: 'Car',
                    icon: 'ðŸš—',
                    carbon: calculateCarbonFootprint('car', distanceKm),
                    reduceTips: [
                        'Carpooling is the single biggest way to reduce your car\'s per-person footprint.',
                        'Consider renting an electric vehicle (EV) if available for your journey.',
                        'Drive efficiently: avoid harsh acceleration/braking, maintain tire pressure, and reduce unnecessary weight.'
                    ],
                    ticketSuggestions: [
                        'If renting, specifically ask for hybrid or electric car options.',
                        'Use ride-sharing apps that offer carpooling options.',
                        'Look for car rental companies with sustainability initiatives.'
                    ]
                },
                {
                    mode: 'Airplane',
                    icon: 'âœˆï¸',
                    carbon: calculateCarbonFootprint('airplane', distanceKm),
                    reduceTips: [
                        'Fly direct whenever possible; take-offs and landings consume the most fuel.',
                        'Choose economy class; more passengers per plane means lower per-person emissions.',
                        'Consider offsetting your flight\'s emissions through reputable programs (e.g., Gold Standard, Verified Carbon Standard).',
                        'Pack light to reduce the aircraft\'s weight and fuel consumption.'
                    ],
                    ticketSuggestions: [
                        'Prioritize direct flights.',
                        'Look for airlines that invest in sustainable aviation fuels (SAF) or have modern, fuel-efficient fleets.',
                        'Book well in advance for potentially better deals and more options.'
                    ]
                },
                {
                    mode: 'Boat',
                    icon: 'ðŸš¢',
                    carbon: calculateCarbonFootprint('boat', distanceKm),
                    reduceTips: [
                        'Emissions vary greatly by boat type (ferry, cruise, cargo). Ferries are generally more efficient for short distances.',
                        'For cruises, choose operators with strong environmental policies and newer, more efficient vessels.',
                        'Avoid unnecessary short boat trips if alternative land transport is available.'
                    ],
                    ticketSuggestions: [
                        'Check ferry schedules for coastal or island travel.',
                        'Research cruise lines for their environmental ratings and sustainable practices.',
                        'Look for local boat tours that emphasize eco-tourism.'
                    ]
                },
                {
                    mode: 'Walk',
                    icon: 'ðŸš¶',
                    carbon: '0.00',
                    reduceTips: [
                        'The ultimate zero-carbon option! Great for your health and the environment.',
                        'Explore local areas on foot to discover hidden gems.',
                        'Combine walking with public transport for a truly green commute.'
                    ],
                    ticketSuggestions: [
                        'No tickets needed! Just comfortable shoes.'
                    ]
                },
                {
                    mode: 'Bicycle',
                    icon: 'ðŸš²',
                    carbon: '0.00',
                    reduceTips: [
                        'Another fantastic zero-carbon option, perfect for medium distances.',
                        'Consider electric bikes for longer or hillier routes.',
                        'Many cities offer bike-sharing programs for convenience.'
                    ],
                    ticketSuggestions: [
                        'No tickets needed! Look for bike rental services in your destination city.'
                    ]
                }
            ];

            // Clear previous results
            optionsContainer.innerHTML = '';

            // Populate results
            travelOptions.forEach(option => {
                const card = document.createElement('div');
                card.className = 'card flex flex-col space-y-3';
                card.innerHTML = `
                    <div class="flex items-center space-x-3 mb-2">
                        <span class="text-3xl">${option.icon}</span>
                        <h3 class="text-xl font-semibold text-gray-700">${option.mode}</h3>
                    </div>
                    <p class="text-gray-600">
                        Estimated Distance: <span class="font-medium">${distanceKm} km</span>
                    </p>
                    <p class="text-gray-600">
                        Estimated Carbon Footprint: <span class="carbon-footprint">${option.carbon} kg CO2e</span>
                    </p>
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">How to reduce carbon:</h4>
                        <ul class="suggestion-list text-sm">
                            ${option.reduceTips.map(tip => `<li>${tip}</li>`).join('')}
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">Low carbon ticket suggestions:</h4>
                        <ul class="suggestion-list text-sm">
                            ${option.ticketSuggestions.map(suggestion => `<li>${suggestion}</li>`).join('')}
                        </ul>
                    </div>
                    <!-- Placeholder for a "Book Now" button -->
                    <button class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 ease-in-out transform hover:scale-105" onclick="alert('This button would link to a real booking site for ${option.mode}!')">
                        Explore Tickets
                    </button>
                `;
                optionsContainer.appendChild(card);
            });

            resultsSection.classList.remove('hidden');
        });

        // Function to handle low carbon stays search and display
        searchStaysBtn.addEventListener('click', async () => { // Added 'async' here
            hideMessageBox(); // Hide any previous messages

            const stayLocation = stayLocationInput.value.trim();
            const checkInDate = checkInDateInput.value;
            const checkOutDate = checkOutDateInput.value;

            if (!stayLocation) {
                showMessage('Please enter a location for your stay.', 'error');
                return;
            }
            if (!checkInDate || !checkOutDate) {
                showMessage('Please enter both check-in and check-out dates.', 'error');
                return;
            }
            if (new Date(checkInDate) >= new Date(checkOutDate)) {
                showMessage('Check-out date must be after check-in date.', 'error');
                return;
            }

            // Fallback to simulated data if no API is integrated or if API fails
            displayStays(getSimulatedStays(stayLocation));
        });

        // Helper function to get simulated stays based on location
        function getSimulatedStays(searchLocation) {
             const simulatedStays = [
                {
                    name: 'Eco-Lodge Green Oasis',
                    type: 'Hotel',
                    city: 'Denver',
                    location: 'Near Denver (Mountain Retreat)',
                    ecoFeatures: [
                        'Powered by solar energy',
                        'Rainwater harvesting system',
                        'Locally sourced organic food',
                        'Composting and waste reduction programs'
                    ],
                    image: 'https://placehold.co/400x250/A7F3D0/065F46?text=Eco+Lodge'
                },
                {
                    name: 'Sustainable City Stay',
                    type: 'Apartment',
                    city: 'New York',
                    location: 'New York (Urban Center)',
                    ecoFeatures: [
                        'LEED certified building',
                        'Energy-efficient appliances',
                        'Public transport accessible',
                        'Recycling facilities on-site'
                    ],
                    image: 'https://placehold.co/400x250/BFDBFE/1E40AF?text=City+Apartment'
                },
                {
                    name: 'Riverside Eco-Cabin',
                    type: 'Cabin/Glamping',
                    city: 'Portland',
                    location: 'Near Portland (Forest Edge)',
                    ecoFeatures: [
                        'Constructed with reclaimed wood',
                        'Compost toilets and greywater recycling',
                        'Minimal light pollution',
                        'Promotes active travel (hiking, biking)'
                    ],
                    image: 'https://placehold.co/400x250/D1FAE5/047857?text=Eco+Cabin'
                },
                {
                    name: 'Community Farm Stay',
                    type: 'Farm Stay/Homestay',
                    city: 'Mumbai',
                    location: 'Rural Mumbai (Countryside)',
                    ecoFeatures: [
                        'Organic farm-to-table meals',
                        'Participate in sustainable farming',
                        'Uses natural building materials',
                        'Supports local community initiatives'
                    ],
                    image: 'https://placehold.co/400x250/FDE68A/92400E?text=Farm+Stay'
                },
                {
                    name: 'Paris Green Hotel',
                    type: 'Hotel',
                    city: 'Paris',
                    location: 'Central Paris',
                    ecoFeatures: [
                        'Green Key certified',
                        'Water-saving fixtures',
                        'Local and seasonal breakfast',
                        'Bike rental available'
                    ],
                    image: 'https://placehold.co/400x250/C3D6E8/334155?text=Paris+Hotel'
                },
                {
                    name: 'Berlin Eco Hostel',
                    type: 'Hostel',
                    city: 'Berlin',
                    location: 'Berlin City Center',
                    ecoFeatures: [
                        'Recycled furniture',
                        'Energy-efficient lighting',
                        'Supports local art scene',
                        'Vegan-friendly options'
                    ],
                    image: 'https://placehold.co/400x250/E0F2F7/0F766E?text=Berlin+Hostel'
                },
                {
                    name: 'Himalayan Eco Retreat',
                    type: 'Resort',
                    city: 'Manali',
                    location: 'Manali (Mountain Valley)',
                    ecoFeatures: [
                        'Sustainable architecture with local materials',
                        'Waste management system',
                        'Promotes responsible tourism',
                        'Organic garden on-site'
                    ],
                    image: 'https://placehold.co/400x250/DDA0DD/800080?text=Himalayan+Retreat'
                },
                {
                    name: 'Goa Green Villa',
                    type: 'Villa',
                    city: 'Goa',
                    location: 'Coastal Goa',
                    ecoFeatures: [
                        'Rainwater harvesting',
                        'Solar water heating',
                        'Natural ventilation design',
                        'Close to public beaches'
                    ],
                    image: 'https://placehold.co/400x250/90EE90/006400?text=Goa+Villa'
                },
                {
                    name: 'Bengaluru Sustainable Stay',
                    type: 'Guesthouse',
                    city: 'Bengaluru',
                    location: 'Bengaluru Tech Hub',
                    ecoFeatures: [
                        'Energy-efficient lighting',
                        'Water recycling for gardening',
                        'Promotes local artisans',
                        'Compost pit for organic waste'
                    ],
                    image: 'https://placehold.co/400x250/ADD8E6/00008B?text=Bengaluru+Stay'
                },
                {
                    name: 'Jaipur Heritage Eco-Hotel',
                    type: 'Hotel',
                    city: 'Jaipur',
                    location: 'Jaipur Old City',
                    ecoFeatures: [
                        'Restored using traditional techniques',
                        'Uses natural cooling methods',
                        'Supports local crafts and culture',
                        'Minimal plastic use'
                    ],
                    image: 'https://placehold.co/400x250/F08080/8B0000?text=Jaipur+Hotel'
                },
                {
                    name: 'Kerala Backwater Eco-Homestay',
                    type: 'Homestay',
                    city: 'Kochi',
                    location: 'Kochi Backwaters',
                    ecoFeatures: [
                        'Built with eco-friendly materials',
                        'Serves traditional, local cuisine',
                        'Offers guided nature walks',
                        'Supports community-based tourism'
                    ],
                    image: 'https://placehold.co/400x250/87CEEB/4682B4?text=Kerala+Homestay'
                },
                {
                    name: 'Chennai Green Resort',
                    type: 'Resort',
                    city: 'Chennai',
                    location: 'Chennai Coast',
                    ecoFeatures: [
                        'Water treatment plant on-site',
                        'Uses renewable energy for common areas',
                        'Organic waste converted to biogas',
                        'Native plant landscaping'
                    ],
                    image: 'https://placehold.co/400x250/FFD700/DAA520?text=Chennai+Resort'
                }
            ];

            const searchLower = searchLocation.toLowerCase();
            return simulatedStays.filter(stay =>
                stay.city.toLowerCase().includes(searchLower) ||
                stay.location.toLowerCase().includes(searchLower) ||
                stay.name.toLowerCase().includes(searchLower) ||
                (searchLower.includes("city") && stay.type.toLowerCase().includes("apartment")) ||
                (searchLower.includes("rural") && stay.type.toLowerCase().includes("farm")) ||
                (searchLower.includes("mountain") && stay.location.toLowerCase().includes("mountain")) ||
                (searchLower.includes("forest") && stay.location.toLowerCase().includes("forest")) ||
                (searchLower.includes("coast") && stay.location.toLowerCase().includes("coastal")) ||
                (searchLower.includes("backwater") && stay.location.toLowerCase().includes("backwater")) ||
                (searchLower.includes("heritage") && stay.name.toLowerCase().includes("heritage"))
            );
        }

        // Helper function to display stays
        function displayStays(stays) {
            staysResultsContainer.innerHTML = ''; // Clear previous results

            if (stays.length === 0) {
                staysResultsContainer.innerHTML = `
                    <p class="text-gray-600 text-center col-span-full">
                        No eco-friendly stays found. Try a more general location or different dates.
                    </p>
                `;
            } else {
                stays.forEach(stay => {
                    const stayCard = document.createElement('div');
                    stayCard.className = 'card flex flex-col space-y-3';
                    stayCard.innerHTML = `
                        <img src="${stay.image}" alt="${stay.name}" class="rounded-lg mb-3 object-cover w-full h-40">
                        <h3 class="text-xl font-semibold text-gray-700">${stay.name} (${stay.type})</h3>
                        <p class="text-gray-600">Location: <span class="font-medium">${stay.location}</span></p>
                        <div>
                            <h4 class="font-medium text-gray-700 mb-1">Eco Features:</h4>
                            <ul class="suggestion-list text-sm">
                                ${stay.ecoFeatures.map(feature => `<li>${feature}</li>`).join('')}
                            </ul>
                        </div>
                        <button class="mt-4 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 ease-in-out transform hover:scale-105" onclick="alert('This button would link to a real booking site for ${stay.name}!')">
                            View Details / Book
                        </button>
                    `;
                    staysResultsContainer.appendChild(stayCard);
                });
            }
        }
        
        // Hamburger menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-menu');
            const navMenu = document.querySelector('.first-box-mobile');
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function(e) {
                    e.stopPropagation();
                    navMenu.classList.toggle('hidden');
                    navMenu.classList.toggle('slide-down');
                });
                document.addEventListener('click', function(e) {
                    if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                        navMenu.classList.add('hidden');
                        navMenu.classList.remove('slide-down');
                    }
                });
                hamburger.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        navMenu.classList.toggle('hidden');
                        navMenu.classList.toggle('slide-down');
                    }
                });
            }
            // Login timeout logic
            const loginTimestamp = localStorage.getItem('loginTimestamp');
            const username = localStorage.getItem('username');
            if (username && loginTimestamp) {
                const now = Date.now();
                if (now - parseInt(loginTimestamp) > 3600000) { // 1 hour
                    localStorage.clear();
                    window.location.href = '/login';
                }
            }
            // Change Login to My Profile if logged in
            const navProfile = document.querySelectorAll('a[href="/login"], a[href="/user"]');
            navProfile.forEach(link => {
                if (username) {
                    link.textContent = 'My Profile';
                    link.setAttribute('href', '/user');
                } else {
                    link.textContent = 'Login';
                    link.setAttribute('href', '/login');
                }
            });
        });
        // Clear login on window close
        window.addEventListener('unload', function() {
            localStorage.removeItem('username');
            localStorage.removeItem('email');
            localStorage.removeItem('loginTimestamp');
        });
    </script>
</body>
</html>